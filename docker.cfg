[buildout]
extends =
    prod.cfg
    versions-migration.cfg

eggs-directory = buildout-cache/eggs
download-cache = buildout-cache/downloads

parts -= facts

parts +=
    makebuildoutcache

[instance]
zeo-client = true
zeo-address = $(ZEO_HOST):$(ZEO_PORT)
shared-blob = off
http-force-connection-close = true
zeo-client-client = client-storage
zope-conf-additional =
  <product-config five.z2monitor>
      bind 0.0.0.0:8888
  </product-config>
  %define ZEOADDRESS ${zeoserver:zeo-address}
  %define ZEOINSTANCE ${buildout:directory}/parts/zeoserver/var
  %define BLOBSTORAGE ${buildout:directory}/var/blobstorage
event-log-custom =
    <syslog>
        address logs.imio.be:5544
        facility local3
        format %(asctime)s $(HOSTNAME_HOST) zope[%(process)s]: $(PROJECT_ID) ${:_buildout_section_name_} [%(levelname)s] %(name)s | %(message)s
	dateformat %b %d %H:%M:%S
        level info
    </syslog>
    <logfile>
        path ${buildout:directory}/var/log/${:_buildout_section_name_}.log
        level INFO
    </logfile>

[instance-debug]
zeo-address = $(ZEO_HOST):$(ZEO_PORT)
shared-blob = off

[makebuildoutcache]
recipe = collective.recipe.buildoutcache
buildout_file = docker.cfg
preremove_old_work_dir = False
timeout = 30
